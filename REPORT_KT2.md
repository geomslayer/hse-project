## Отчет к контрольной точке 2

### Инструкция по установке
1. Скачать [.apk файл](https://drive.google.com/open?id=0BwryhwMN8v5XNDhuVGZROXFYamc) на смартфон (версия Android должна быть не ниже 4.1 Jelly Bean)
2. Запустить файл, нажать "установить"

### Проделанная работа
1. Были созданы файлы разметки пользовательского интерфейса: главный экран (MainActivity) содержит список элементов с новостными записями, по клику на которые открывается новый экран (DetailedActivity), отображающий всю информацию о новостной записи: категория, дата публикации, заголовок, текст новости, а также относящееся к новости изображение. Главный экран также содержит выпадающий список (Spinner), позволяющий выбрать желаемую категорию новостей, например, "Наука и техника", "Финансы", "Спорт" и другие.
2. Была написана логика приложения, связывающая события пользователя с отображением экранных элементов. Заданы правила, в каком порядке информация должна отображаться.
3. Была заведена база данных для сохранения списка прочитанных новостей. Непрочитанные новости маркируются пометкой "new".
4. Для подсчета статистики был создан специальный объект. Учитывается количество прочитанных новостей, любимая новостная категория (она автоматически выбирается при открытии приложения), количество всего отвеченных вопросов и правильно отвеченных (сейчас неактуально). Этот объект хранится во внутренней памяти мобильного устройства.
5. Для парсинга и хранения новостных записей был установлен web-сервер. Код для сервера расположен в соседнем [репозитории](https://github.com/geomslayer/hse-project-server). В качестве сервера был выбрана машина, работающая под управлением операционной системы Ubuntu 16.04.
6. На сервере была установлена база данных PostgreSQL для хранения новостных записей.
7. Для парсинга новостей был написан специальных скрипт, запускающийся каждые 10 минут. Он получает новости из сайта [lenta.ru](https://lenta.ru/).
8. Чтобы наладить передачу новостей на устройство была разработана API для http-запросов, среди которых есть запрос получения списка категорий, определенной категории, определенной новости, списка фиксированной длины новостей для определенной категории с условием на время публикации (для возможности подгружать записи по мере прокручивания списка новостей).

![](https://pp.userapi.com/c639225/v639225492/13be4/NjFzHU9Au2g.jpg)
![](https://pp.userapi.com/c639225/v639225492/13bec/JTuSWzfnCSE.jpg)

### Архитектура приложения

Вся логика приложения находится в пакете [```app/src/main/java/com/example/geomslayer/hseproject/```](https://github.com/geomslayer/hse-project/tree/master/app/src/main/java/com/example/geomslayer/hseproject). Рассмотрим наиболее важные подпакеты отдельно.

В папке ```base``` находятся классы, создающие глобальные для всего приложения объекты: ```OkHttpClient``` позволяет делать запросы к через сеть. Здесь же инициализируется база данных. Также в ```BaseActivity``` задаются параметры, общие для всех activities: настраивается меню и toolbar.

В подпакете ```mainscreen``` описана логика главного экрана приложения. Адаптеры отвечают за связывание элементов управления (прокручиваемый список, выпадающий список) и отображаемых данных. В ```MainActivity``` реализованы все основные функции главного экрана: "загрузить категории", "загрузить новостные записи", "догрузить записи, если пользователь прокрутил в конец списка"; установлены слушатели событий.

```details``` содержит класс, описывающий экран просмотра конкретной новости. В ```DetailActivity``` заданы функции "отобразить расширенную информацию о новости", "загрузить сопутствующую картинку", "установить слушатели событий".

В директории ```stats``` находятся классы, отвечающие за подсчет статистики. Экземпляр этого класса единственный, он хранится во внутренней памяти устройства и при каждом изменении перезаписывается.

В пакете [```app/src/main/res/layout/```](https://github.com/geomslayer/hse-project/tree/master/app/src/main/res/layout) находится разметка экранов приложения, то есть описание того, как должны размещаться различные элементы на экране.

Самую важную информацию о приложении (глобальные настройки, разрешения, точка входа, настройки Activities) содержит файл [```app/src/main/AndroidManifest.xml```](https://github.com/geomslayer/hse-project/blob/master/app/src/main/AndroidManifest.xml).

### Дальнейшая разработка
На данный момент основной задачей является разработать алгоритм генерации вопросов к новостным записям. Затем нужно разработать привлекательный дизайн.
